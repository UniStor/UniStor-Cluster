---
- name: Used Drive with a Partition
  set_fact:
    drives: "{{ drivelist + [item] }}"
  when: (ansible_facts.devices[item].vendor is defined and ansible_facts.devices[item].vendor != None )
  loop: "{{ ansible_facts.devices.keys()|list }}"

- name: All Drives
  debug:
    var: "drives"
