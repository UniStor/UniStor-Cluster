---
- name: All Drives
  debug:
    var: "[item]"
    # var: "ansible_facts.devices[item]"
  when: (ansible_facts.devices[item].vendor is defined and ansible_facts.devices[item].vendor != None )
  loop: "{{ ansible_facts.devices.keys()|list }}"
  # loop: "{{ ansible_facts.device_links.ids.keys()|list }}"  # Alt


- name: set All Drives
  set_fact:
   drives: "{{ drives + [item] }}"
  when: (ansible_facts.devices[item].vendor is defined and ansible_facts.devices[item].vendor != None )
  loop: "{{ ansible_facts.devices.keys()|list }}"
  # loop: "{{ ansible_facts.device_links.ids.keys()|list }}"  # Alt


- name: All Drives
  debug:
    var: "drives"
