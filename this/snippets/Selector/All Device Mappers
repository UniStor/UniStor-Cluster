---

- name: All Device Mappers
  debug:
    var: "[item]"
    # var: "ansible_facts.devices[item]"
  when: (
    (ansible_facts.devices[item].virtual == 1) and
    (ansible_facts.devices[item].partitions|length == 0) and
    (
      ansible_facts.devices[item].links.ids|length > 0 or
      ansible_facts.devices[item].links.masters|length > 0 or
      ansible_facts.devices[item].links.uuids|length > 0
    )
    )
  loop: "{{ ansible_facts.devices.keys()|list }}"
  #Skips drives! and loop files
